<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Laurette Mhlanga, Bernard Boateng, Eniola Bamgboye,Hephzibah A.T. Adenji, Yusuf Jamiu, Gift Enang1, Cyril Ademu, Chukwu Okoronkwo, and Ifeoma D. Ozodiegwu">

<title>User Manual - Malaria Re-Prioritization Tool</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="user_manual_files/libs/clipboard/clipboard.min.js"></script>
<script src="user_manual_files/libs/quarto-html/quarto.js"></script>
<script src="user_manual_files/libs/quarto-html/popper.min.js"></script>
<script src="user_manual_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="user_manual_files/libs/quarto-html/anchor.min.js"></script>
<link href="user_manual_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="user_manual_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="user_manual_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="user_manual_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="user_manual_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction-to-malaria-re-prioritization-tool-mrpt" id="toc-introduction-to-malaria-re-prioritization-tool-mrpt" class="nav-link" data-scroll-target="#introduction-to-malaria-re-prioritization-tool-mrpt">Introduction to Malaria Re-Prioritization Tool (MRPT)</a></li>
  <li><a href="#input-variables" id="toc-input-variables" class="nav-link" data-scroll-target="#input-variables">Input variables</a></li>
  <li><a href="#variable-relationships-to-the-malaria-burden-and-normalization-tab" id="toc-variable-relationships-to-the-malaria-burden-and-normalization-tab" class="nav-link" data-scroll-target="#variable-relationships-to-the-malaria-burden-and-normalization-tab"><strong>Variable Relationships to the malaria burden and Normalization Tab</strong></a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="user_manual.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">User Manual - Malaria Re-Prioritization Tool</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Laurette Mhlanga, Bernard Boateng, Eniola Bamgboye,Hephzibah A.T. Adenji, Yusuf Jamiu, Gift Enang1, Cyril Ademu, Chukwu Okoronkwo, and Ifeoma D. Ozodiegwu </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
</section>
<section id="introduction-to-malaria-re-prioritization-tool-mrpt" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-malaria-re-prioritization-tool-mrpt">Introduction to <a href="https://urbanmalaria.shinyapps.io/mrpt/">Malaria Re-Prioritization Tool (MRPT)</a></h2>
<p>Malaria remains a significant public health issue in Nigeria, particularly in urban areas where inadequate housing and sanitation increase transmission risks. Effective resource allocation is essential, especially in resource-limited settings. The Malaria Reprioritization Tool (MRPT), a is an R-Shiny application developed with end-users to address these challenges. The MRPT provides a standardized, scalable platform for malaria risk assessment and targeted interventions. The users upload a data file consisting of user sourced variables associated with malaria or known to drive malaria transmission and the shapefile of the area of interest.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Figure_5.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><strong>Figure 1: Summarized output of the MRPT based of a Warri, a metropolitan area in the Delta state.</strong> This an illustration of the visualization end users can expect to get after using this application, including the selected covariates (<strong>A</strong>), two maps that seemed most plausible based on the quality assurance done to the initial covariates (<strong>B</strong>), risk map that is based on the median values of the ranks of all the models (C), and decision tree that outlines the sequence of steps implemented <strong>(D</strong>).</figcaption>
</figure>
</div>
<p>Efficient use of this tool requires the users to validate the output their data yields using <a href="https://earthengine.google.com/">Google Earth Engine</a> or <a href="https://earth.google.com/web/@0,-2.135,0a,22251752.77375655d,35y,0h,0t,0r/data=CgRCAggBQgIIAEoNCP___________wEQAA">Google Earth Pro</a>. After each variable has been validated they can then be selected to identified high-risk wards, validating the tool’s scalability and support for national malaria strategies. Additionally, the process demonstrated high user satisfaction and tool success, further emphasizing the value of user involvement in achieving effective and impactful solutions. Co-developing the MRPT emphasized the value of continuous stakeholder engagement and iterative updates. Key lessons include the importance of the applications’ usability, reliability, and methodological rigor. The MRPT is a critical step in reducing malaria in urban Nigeria by optimizing resource distribution and intervention strategies.</p>
<section id="sec-purpose-of-this-guide" class="level3">
<h3 class="anchored" data-anchor-id="sec-purpose-of-this-guide"><strong>Purpose of This Guide</strong></h3>
<p>This guide provides a <strong>step-by-step walkthrough</strong> for using the MRMT, from <strong>data preparation</strong> to <strong>final analysis and interpretation</strong>. By following this manual, users will gain a comprehensive understanding of how to:</p>
<ul>
<li><p><strong>Upload, clean, and process data</strong> and <strong>shapefiles</strong> required for malaria risk assessment.</p></li>
<li><p><strong>Customize settings</strong> to adjust key malaria risk factors based on available information.</p></li>
<li><p><strong>Generate malaria risk maps</strong> at the <strong>ward level</strong>, displaying priority areas for intervention.</p></li>
<li><p><strong>Interpret the outputs</strong> to inform evidence-based malaria control strategies.</p></li>
</ul>
<p>These steps ensures users can effectively navigate the tool from <strong>initial data preparation</strong> to <strong>final analysis and interpretation</strong>. By following this guide, users will gain the necessary knowledge to leverage MRPT for <strong>evidence-based decision-making</strong>, helping to optimize malaria control strategies at the <strong>ward level</strong>. Download the Warri <a href="https://drive.google.com/drive/folders/1Y0N1bT1NbSq--NNg7q2DNP5biC0PyzhM?ths=true">shapefile</a> and <a href="https://drive.google.com/drive/folders/1Y0N1bT1NbSq--NNg7q2DNP5biC0PyzhM?ths=true">variables</a> to follow the tutorial.</p>
</section>
<section id="who-should-use-this-tool" class="level3">
<h3 class="anchored" data-anchor-id="who-should-use-this-tool"><strong>Who Should Use This Tool?</strong></h3>
<p>The MRMT is intended for:</p>
<ul>
<li><p><strong>National Malaria Elimination Programs (NMEP)</strong></p></li>
<li><p><strong>Public Health Decision-Makers &amp; Policy Planners</strong></p></li>
<li><p><strong>Epidemiologists &amp; Malaria Researchers</strong></p></li>
<li><p><strong>NGOs and Health Organizations</strong> involved in malaria control</p></li>
<li><p><strong>Field Teams</strong> conducting malaria surveillance and intervention distribution.</p></li>
</ul>
</section>
</section>
<section id="input-variables" class="level2">
<h2 class="anchored" data-anchor-id="input-variables">Input variables</h2>
<section id="upload-data" class="level3">
<h3 class="anchored" data-anchor-id="upload-data">Upload data</h3>
<p>This tab allows (figure 1) you to upload your shapefile and dataset. Note the application requires your dataset to be <em>.csv</em> file whereas the shapefile should be a <em>.zip</em> (<em>see -<a href="#sec-purpose-of-this-guide">tutorial variables</a></em>). Take note of where you saved your datafiles are saved, navigate to the respective folder and upload the respective files.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/File_uploading-01.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure 2: Shows the page were users can upload the shapefile and variables meant to be analysed.</figcaption>
</figure>
</div>
<p>The tool accepts .CSV files containing ward names and various risk factors, such as settlement type, vegetation index, and rainfall data. After uploading, the system checks for missing values and ward name matches between your files.</p>
</section>
<section id="handling-unmatched-ward-names" class="level3">
<h3 class="anchored" data-anchor-id="handling-unmatched-ward-names">Handling unmatched ward names</h3>
<p><img src="images/wardname_cleaning.png" class="img-fluid" alt="Figure 3: the application also detects unmatched ward names between the shapefile and variable datasets.">{#cleaning ward names}</p>
</section>
<section id="handling-missing-values" class="level3">
<h3 class="anchored" data-anchor-id="handling-missing-values">Handling missing values</h3>
<p>When missing values are detected (<em>see - <a href="#missing_values">figure 3</a></em>), the tool offers three methods for handling them</p>
<ul>
<li><p>spatial neighbor mean method uses values from adjacent wards, particularly useful for spatially correlated variables</p></li>
<li><p>region mean provides an average from the entire study area</p></li>
<li><p>region mode uses the most common value, suitable for categorical variables, this is also recommended when the data is sparse and neighboring polygons have no data</p></li>
</ul>
<div id="missing_values" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/handling_nas.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure 3: Shows the variables within the dataset that has missing values and against each variable notice that the dropdown menu that allows one to select the smoothing method.</figcaption>
</figure>
</div>
<p>After have selected the smoothing method fo choice click apply button and you will have two maps shown on the Tab one the before (missing values) and after (populated with estimates from the chosen smoothing approach) (see - <a href="#handling_nas"><em>figure 4</em></a>).</p>
<div id="handling_nas" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/handled_nas_output.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure 4: Side-by-side maps showing your data before (left) and after cleaning (right).</figcaption>
</figure>
</div>
<p>The left map displays the original data with missing values, while the right map shows the cleaned dataset. This visual comparison helps you verify that the cleaning process produced reasonable results. The color gradient indicates the variable’s magnitude across different wards, with tooltips providing detailed information for each area.</p>
</section>
</section>
<section id="variable-relationships-to-the-malaria-burden-and-normalization-tab" class="level2">
<h2 class="anchored" data-anchor-id="variable-relationships-to-the-malaria-burden-and-normalization-tab"><strong>Variable Relationships to the malaria burden and Normalization Tab</strong></h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>